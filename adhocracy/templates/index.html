<%inherit file="/template.html" />
<%namespace name="components" file="/components.html"/>
<%namespace name="map" file="/geo/map.html"/>
<%def name="title()">${c.page.title}</%def>

<%def name="breadcrumbs()"></%def>

<%block name="content_wrapper">

${h.need.knockout_js}

<%doc>
FIXME: AFAIK id=content is used as a marker for diazo theming
and not part of our common markup anymor. Drop it at the end of
the transition
</%doc>
<div id="map_startpage_wrapper" class="map_size_normal">
<div id="content-startpage" class="full_teaser">
  <!--This is dummy tag and only usefull to merge in wordpress content-->
</div>

  %if h.asbool(config.get('adhocracy.show_overview_map_on_index')):
  <div class="map_wrapper">
    <div id="map" class="map"></div>
    ${map.show_select_instance()}

    <div id="instance_search">

      <div class="ui-widget" id="search_field">
        <h4>${_(u'Find your instance')}</h4>
        <input id="overview_search_field" type="text" placeholder="${_(u'Enter zip code or region')}"/>
        <a id="overview_search_button" class="button">${_('Start')}</a>
      </div>

      <script type="text/html" id="search_result_template">
        <div data-bind="if: showSearchResults">
          <div class="ui-widget" id="search_result_content">
            <h4>${_(u'Search result')}</h4>
            <div id="num_search_result">
              ${_(u'Your search for ')} 
              "<span data-bind="text: searchQuery"></span>" 
              ${_(u'results in')} 
              <span data-bind="text: numberHits"></span> 
              <!-- ko if: singleHit -->
                ${_(u'hit')}.
              <!-- /ko -->
              <!-- ko ifnot: singleHit -->
                ${_(u'hits')}.
              <!-- /ko -->
            </div>
          </div>
        </div>
      </script>

      <div data-bind="template: 'search_result_template'"></div>

    </div>

    <div id="resize_map_button"></div>
    <div class="note_map map_attribution">&copy; <a href="http://www.openstreetmap.org/">OpenStreetMap</a>-KartografInnen (<a href="http://creativecommons.org/licenses/by-sa/2.0/">Lizenz</a>)</div>

  </div>
  %endif
</div>

<div id="content-bottom">
    <div id="content-bottom-left">
        <!--This is dummy tag and only usefull to merge in wordpress content-->
    </div>
    <div id="content-bottom-center">
        <!--This is dummy tag and only usefull to merge in wordpress content-->
    </div>
    <div id="content-bottom-right">
        <!--This is dummy tag and only usefull to merge in wordpress content-->
    </div>
</div>
<%doc>
<div class="full_teaser">
  <div class="clearfix"></div>

  <div id="stats">
      ${_("<b>%s</b> members") % c.stats_global.get('members')|n} ·
      ${_("<b>%s</b> proposals") % c.stats_global.get('proposals')|n}  ·
      ${_("<b>%s</b> comments") % c.stats_global.get('comments')|n} ·
      ${_("<b>%s</b> votes") % c.stats_global.get('votes')|n}
  </div>  

  ## FIXME: Add line that scrolls through last events
</div>
</%doc>

</%block>
